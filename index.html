<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Creazione Personaggio Tales from Ivory</title>
  <link rel="stylesheet" href="css/site-theme.css">
  <link rel="stylesheet" href="css/character-sheet.css">
  <link rel="icon" href="assets/Tales-Ivory-Logo-white-white.png">
</head>
<body>
  <header class="banner">
    <div class="header-top">
      <img src="assets/Tales-Ivory-Logo-white-white.png" alt="Tales from Ivory logo">
      <h1>Creazione Personaggio Tales from Ivory</h1>
    </div>
    <div class="header-actions">
      <button
        id="customDataButton"
        class="btn btn-secondary"
        type="button"
        data-i18n="manageCustomData"
      >
        Manage Custom Data
      </button>
      <button id="resetButton" class="btn" type="button">Reset Character</button>
    </div>
  </header>
  <div class="section-divider"></div>
  <div id="progressContainer">
    <div id="progressBar"></div>
  </div>
  <!-- Navigazione a step -->
  <nav>
    <button id="btnStep1" class="btn">Step 1: Dati Iniziali</button>
    <button id="btnStep2" class="btn">Step 2: Classe & Livello</button>
    <button id="btnStep3" class="btn">Step 3: Razza</button>
    <button id="btnStep4" class="btn">Step 4: Background</button>
    <button id="btnStep5" class="btn">Step 5: Equipment</button>
    <button id="btnStep6" class="btn">Step 6: Point Buy</button>
    <button id="btnStep7" class="btn">Step 7: Recap & Esportazione</button>
  </nav>
  <div class="section-divider"></div>
  <!-- Container degli step -->
  <div id="stepNav">
    <button id="prevStep" class="arrow-btn">&#8592;</button>
    <div id="stepContainer">
      <!-- Step 1: Dati Iniziali -->
    <div id="step1" class="step active">
      <h2>Step 1: Dati Iniziali</h2>
      <div class="form-group">
        <label for="userName">Nome Utente:</label>
        <input type="text" id="userName" class="form-control" placeholder="Inserisci il tuo nome">
      </div>
      <div class="form-group">
        <label for="characterName">Nome del Personaggio:</label>
        <input type="text" id="characterName" class="form-control" placeholder="Inserisci il nome del tuo personaggio">
      </div>
      <div class="form-group">
        <label for="origin">Provenienza:</label>
        <input type="text" id="origin" class="form-control" placeholder="Inserisci la provenienza del personaggio">
      </div>
      <div class="form-group">
        <label for="age">Età:</label>
        <input type="number" id="age" class="form-control" placeholder="Inserisci l'età del personaggio">
      </div>
    </div>
      <!-- Step 2: Scelta della Classe, Sottoclasse e Livello -->
      <div id="step2" class="step hidden">
        <h2>Step 2: Scelta della Classe, Sottoclasse e Livello</h2>
        <input
          id="classSearch"
          type="text"
          class="form-control"
          placeholder="Search classes"
          data-i18n-placeholder="searchClasses"
        />
        <div id="classList" class="class-list"></div>
        <div id="selectedClasses"></div>
        <div id="levelContainer" class="form-group hidden">
          <label for="levelSelect">Livello del Personaggio:</label>
          <select id="levelSelect" class="form-control">
            <!-- Opzioni da 1 a 20 -->
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
          </select>
        </div>
        <div id="classFeatures" class="accordion hidden"></div>
        <div id="classActions" class="form-group hidden">
          <button id="changeClassButton" class="btn">Cambia Classe</button>
          <p id="addClassPrompt" class="hidden"><a href="#" id="addClassLink" data-i18n="addAnotherClass">Add another class?</a></p>
        </div>
      </div>
      <!-- Step 3: Scelta della Razza -->
      <div id="step3" class="step hidden">
        <h2>Step 3: Scelta della Razza</h2>
        <input
          id="raceSearch"
          type="text"
          class="form-control"
          placeholder="Search races"
          data-i18n-placeholder="searchRaces"
        />
        <div id="raceList" class="class-list"></div>
        <div id="raceFeatures" class="accordion hidden">
          <div id="raceTraits"></div>
        </div>
        <div class="form-group">
          <button id="changeRace" class="btn hidden" data-i18n="changeRace">Change Race</button>
        </div>
      </div>
      <!-- Step 4: Background -->
      <div id="step4" class="step hidden">
        <h2>Step 4: Background</h2>
        <input
          id="backgroundSearch"
          type="text"
          class="form-control"
          placeholder="Search backgrounds"
          data-i18n-placeholder="searchBackgrounds"
        />
        <div id="backgroundList" class="class-list"></div>
        <div class="form-group">
          <label for="backgroundSelect" class="hidden">Background:</label>
          <select id="backgroundSelect" class="form-control hidden">
            <option value="">Seleziona un background</option>
          </select>
        </div>
        <div id="backgroundSkills"></div>
        <div id="backgroundTools"></div>
        <div id="backgroundLanguages"></div>
        <div id="backgroundFeat"></div>
        <div class="form-group">
          <button id="changeBackground" class="btn hidden" data-i18n="changeBackground">Change Background</button>
        </div>
      </div>
      <!-- Step 5: Equipment -->
      <div id="step5" class="step hidden">
        <h2>Step 5: Equipment</h2>
        <div id="equipmentSelections" class="form-group"></div>
        <div class="form-group">
          <button id="confirmEquipment" class="btn btn-primary" data-i18n="confirmEquipment">Confirm Equipment</button>
        </div>
      </div>
      <!-- Step 6: Sistema Point Buy -->
      <div id="step6" class="step hidden">
        <h2>Step 6: Sistema Point Buy</h2>
        <p class="text-center"><strong>Total Points Remaining:</strong> <span id="pointsRemaining">27</span></p>
        <p class="text-center">Assegna i tuoi punti tra i punteggi di caratteristica (FOR, DES, COS, INT, SAG, CAR).</p>
        <div id="bonusSelection">
          <h3>Distribuzione Punteggi Bonus</h3>
          <p>Distribuisci i tuoi 3 punti extra in una delle seguenti combinazioni:</p>
          <ul>
            <li>+2 a una caratteristica e +1 a un'altra</li>
            <li>+1 a tre caratteristiche diverse</li>
          </ul>
          <div id="bonusRow">
            <div class="form-group">
              <label for="bonusSelect1">Bonus 1:</label>
              <select id="bonusSelect1" class="form-control">
                <option value="">Seleziona</option>
                <option value="str">Forza</option>
                <option value="dex">Destrezza</option>
                <option value="con">Costituzione</option>
                <option value="int">Intelligenza</option>
                <option value="wis">Saggezza</option>
                <option value="cha">Carisma</option>
              </select>
            </div>
            <div class="form-group">
              <label for="bonusSelect2">Bonus 2:</label>
              <select id="bonusSelect2" class="form-control">
                <option value="">Seleziona</option>
                <option value="str">Forza</option>
                <option value="dex">Destrezza</option>
                <option value="con">Costituzione</option>
                <option value="int">Intelligenza</option>
                <option value="wis">Saggezza</option>
                <option value="cha">Carisma</option>
              </select>
            </div>
            <div class="form-group">
              <label for="bonusSelect3">Bonus 3:</label>
              <select id="bonusSelect3" class="form-control">
                <option value="">Seleziona</option>
                <option value="str">Forza</option>
                <option value="dex">Destrezza</option>
                <option value="con">Costituzione</option>
                <option value="int">Intelligenza</option>
                <option value="wis">Saggezza</option>
                <option value="cha">Carisma</option>
              </select>
            </div>
            <div class="form-group">
              <button id="applyBonus" class="btn btn-primary">Applica Punteggi Bonus</button>
            </div>
          </div>
        </div>
        <table class="pointbuy-table">
          <thead>
            <tr>
              <th>Caratteristiche</th>
              <th>Spendi i tuoi punti</th>
              <th>Punteggi Iniziali</th>
              <th>Punteggi Bonus</th>
              <th>Punteggi Finali</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>FOR</td>
              <td>
                <button class="btn" data-ability="str" data-action="increase" type="button">+</button>
                <button class="btn" data-ability="str" data-action="decrease" type="button">-</button>
              </td>
              <td><span id="strPoints">8</span></td>
              <td><span id="strBonusModifier">0</span></td>
              <td id="strFinalScore">8</td>
            </tr>
            <tr>
              <td>DES</td>
              <td>
                <button class="btn" data-ability="dex" data-action="increase" type="button">+</button>
                <button class="btn" data-ability="dex" data-action="decrease" type="button">-</button>
              </td>
              <td><span id="dexPoints">8</span></td>
              <td><span id="dexBonusModifier">0</span></td>
              <td id="dexFinalScore">8</td>
            </tr>
            <tr>
              <td>COS</td>
              <td>
                <button class="btn" data-ability="con" data-action="increase" type="button">+</button>
                <button class="btn" data-ability="con" data-action="decrease" type="button">-</button>
              </td>
              <td><span id="conPoints">8</span></td>
              <td><span id="conBonusModifier">0</span></td>
              <td id="conFinalScore">8</td>
            </tr>
            <tr>
              <td>INT</td>
              <td>
                <button class="btn" data-ability="int" data-action="increase" type="button">+</button>
                <button class="btn" data-ability="int" data-action="decrease" type="button">-</button>
              </td>
              <td><span id="intPoints">8</span></td>
              <td><span id="intBonusModifier">0</span></td>
              <td id="intFinalScore">8</td>
            </tr>
            <tr>
              <td>SAG</td>
              <td>
                <button class="btn" data-ability="wis" data-action="increase" type="button">+</button>
                <button class="btn" data-ability="wis" data-action="decrease" type="button">-</button>
              </td>
              <td><span id="wisPoints">8</span></td>
              <td><span id="wisBonusModifier">0</span></td>
              <td id="wisFinalScore">8</td>
            </tr>
            <tr>
              <td>CAR</td>
              <td>
                <button class="btn" data-ability="cha" data-action="increase" type="button">+</button>
                <button class="btn" data-ability="cha" data-action="decrease" type="button">-</button>
              </td>
              <td><span id="chaPoints">8</span></td>
              <td><span id="chaBonusModifier">0</span></td>
              <td id="chaFinalScore">8</td>
            </tr>
          </tbody>
        </table>
        <input type="hidden" id="strBackgroundTalent" value="0">
        <input type="hidden" id="dexBackgroundTalent" value="0">
        <input type="hidden" id="conBackgroundTalent" value="0">
        <input type="hidden" id="intBackgroundTalent" value="0">
        <input type="hidden" id="wisBackgroundTalent" value="0">
        <input type="hidden" id="chaBackgroundTalent" value="0">
      </div>
      <!-- Step 7: Recap & Esportazione -->
      <div id="step7" class="step hidden">
        <h2>Step 7: Recap & Esportazione</h2>
        <div id="characterSheet" class="character-sheet"></div>
        <div class="form-group">
          <button id="downloadJson" class="btn btn-primary">Download JSON</button>
        </div>
        <div class="form-group">
          <button id="generatePdf" class="btn btn-primary">Genera PDF</button>
        </div>
      </div>
    </div>
    <button id="nextStep" class="arrow-btn" disabled>&#8594;</button>
  </div>

  <!-- Modal per i dettagli della classe -->
  <div id="classModal" class="modal hidden">
    <div class="modal-content">
      <span id="closeClassModal" class="close">&times;</span>
      <div id="classModalDetails"></div>
      <button id="addClassButton" class="btn btn-primary">Aggiungi Classe</button>
    </div>
  </div>

  <!-- Modal per la selezione di una nuova classe -->
  <div id="classSelectionModal" class="modal hidden">
    <div class="modal-content">
      <span id="closeClassSelectionModal" class="close">&times;</span>
      <div id="classSelectionList"></div>
    </div>
  </div>

  <!-- Modal per i dettagli della razza -->
  <div id="raceModal" class="modal hidden">
    <div class="modal-content">
      <span id="closeRaceModal" class="close">&times;</span>
      <div id="raceModalDetails"></div>
    </div>
  </div>

  <!-- Modal per i dettagli del background -->
  <div id="backgroundModal" class="modal hidden">
    <div class="modal-content">
      <span id="closeBackgroundModal" class="close">&times;</span>
      <div id="backgroundModalDetails"></div>
      <button id="addBackgroundButton" class="btn btn-primary">Aggiungi Background</button>
    </div>
  </div>

  <div
    id="customDataModal"
    class="custom-data-modal hidden"
    role="dialog"
    aria-modal="true"
    aria-labelledby="customDataModalTitle"
  >
    <div class="custom-data-modal__panel">
      <div class="custom-data-modal__header">
        <h2 id="customDataModalTitle" data-i18n="manageCustomData">Custom Data Manager</h2>
        <button type="button" class="custom-data-modal__close" data-action="close" aria-label="Close">&times;</button>
      </div>
      <div class="custom-data-modal__body">
        <nav class="custom-data-modal__tabs" data-role="category-tabs"></nav>
        <div class="custom-data-modal__content">
          <div class="custom-data-modal__mode" data-role="mode-toggle">
            <label>
              <input type="radio" name="customDataMode" value="json" data-role="mode-json" checked>
              <span data-i18n="customDataModeJson">JSON Editor</span>
            </label>
            <label>
              <input type="radio" name="customDataMode" value="freeform" data-role="mode-text">
              <span data-i18n="customDataModeText">Guided Text</span>
            </label>
          </div>
          <div class="custom-data-modal__section">
            <h3 data-role="category-title"></h3>
            <p class="custom-data-modal__description" data-role="description"></p>
          </div>
          <div class="custom-data-modal__helper" data-role="helper"></div>
          <textarea
            class="custom-data-modal__editor"
            data-role="editor"
            spellcheck="false"
            placeholder="[]"
          ></textarea>
          <textarea
            class="custom-data-modal__editor hidden"
            data-role="freeform"
            spellcheck="true"
            placeholder=""
          ></textarea>
          <div class="custom-data-modal__feedback" data-role="feedback"></div>
          <div class="custom-data-modal__actions">
            <div class="custom-data-modal__actions-left">
              <button type="button" class="btn btn-secondary" data-action="sample">Load Sample</button>
              <button type="button" class="btn btn-secondary" data-action="import">Import JSON</button>
              <input id="customDataFileInput" type="file" accept="application/json" class="hidden" />
              <button type="button" class="btn btn-secondary" data-action="export">Export</button>
              <button type="button" class="btn btn-secondary hidden" data-action="parse" data-i18n="customDataParse">Parse Text</button>
            </div>
            <div class="custom-data-modal__actions-right">
              <button type="button" class="btn btn-secondary" data-action="reset">Reset Category</button>
              <button type="button" class="btn btn-primary" data-action="save">Save Changes</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="src/main.js"></script>
</body>
</html>
